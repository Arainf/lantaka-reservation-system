import{r as c,j as e}from"./index-D5vEyPHo.js";import{c as I,i as B}from"./lucide-D9gs9x5f.js";import{N as E,a as $}from"./NavigationTop-DyJ0_YrQ.js";import{d as A}from"./App-Djhw_SJK.js";import{B as O,S as H,C as S,g as D,T as P}from"./NotificationBell-BTbLSTBQ.js";import{B as r}from"./createLucideIcon-8mYcU7v_.js";import{T as M,a as V,b as G,c as j,d as z,e as g}from"./table-D_aKbOch.js";import{D as L,a as k,b as X,c as q,d as J,e as K}from"./dialog-C3s8z_XE.js";import{L as h}from"./label-_-sDx8Dq.js";import{C as Q}from"./chevron-left-CITwkm69.js";import{C as U}from"./chevron-right-BAR7VKsc.js";import{X as W}from"./index-BxHjqAeQ.js";import{I as Y}from"./input-2rwcTciZ.js";import{S as Z,a as ee,b as se,c as te,d as le}from"./select-DQ9Ul_4x.js";import{S as ae}from"./routes-B8Fxvvtg.js";import{S as ie}from"./search-B77jdn07.js";import{R as ne}from"./refresh-cw-DRZkr8V2.js";import"./index-BhiIR7t5.js";import"./iconBase-Kpgs8Efe.js";import"./index-BGl0ELxP.js";import"./index-L6YSZLy6.js";import"./Combination-CrfrviD1.js";import"./index-ByrSLeMy.js";function re({currentPage:i,setCurrentPage:N}){const{guests:x,selectGuest:w,deleteGuest:C}=A(),[_,n]=c.useState(!1),[f,o]=c.useState(!1),[l,d]=c.useState(null),m=5,u=Math.ceil(x.length/m),y=x.slice((i-1)*m,i*m),b=t=>{switch(t.toLowerCase()){case"internal":return"bg-blue-100 text-blue-800";case"external":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},p=t=>{d(t),w(t.guest_id),n(!0)},v=t=>{t.stopPropagation(),o(!0)},s=()=>{l&&(C(l.guest_id),n(!1),o(!1))},a=t=>{t>=1&&t<=u&&N(t)};return e.jsxs(e.Fragment,{children:[e.jsxs(M,{children:[e.jsx(V,{children:e.jsxs(G,{className:"hover:bg-bg-[#0f172a]",children:[e.jsx(j,{className:"w-[25%] text-white",children:"Guest Name"}),e.jsx(j,{className:"w-[20%] text-white",children:"Email"}),e.jsx(j,{className:"w-[20%] text-white",children:"Phone"}),e.jsx(j,{className:"w-[15%] text-white",children:"Type"}),e.jsx(j,{className:"w-[30%] text-white",children:"Client"})]})}),e.jsx(z,{children:y.map(t=>e.jsxs(G,{onClick:()=>p(t),className:"cursor-pointer hover:bg-blue-100",children:[e.jsxs(g,{className:"font-medium",children:[t.guest_fName," ",t.guest_lName]}),e.jsx(g,{children:t.guest_email}),e.jsx(g,{children:t.guest_phone}),e.jsx(g,{children:e.jsx(O,{variant:"secondary",className:b(t.guest_type),children:t.guest_type})}),e.jsx(g,{children:t.guest_client})]},t.guest_id))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs(r,{variant:"outline",onClick:()=>a(i-1),disabled:i===1,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs("span",{children:["Page ",i," of ",u]}),e.jsxs(r,{variant:"outline",onClick:()=>a(i+1),disabled:i===u,children:["Next",e.jsx(U,{className:"h-4 w-4 ml-2"})]})]}),e.jsx(L,{open:_,onOpenChange:n,children:e.jsxs(k,{className:"bg-white p-0 max-w-4xl border-none flex flex-col items-center gap-3 shadow-none",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 w-full max-w-lg",children:[e.jsxs("div",{className:"flex flex-row gap-3 items-center w-full",children:[e.jsx("img",{src:H,alt:"",width:60,height:60,className:"rounded-full"}),e.jsx(S,{className:"w-full",children:e.jsxs(D,{className:"py-3",children:[e.jsx("h3",{className:"font-semibold",children:l&&`${l.guest_fName} ${l.guest_lName}`}),e.jsx("p",{className:"text-sm text-gray-500",children:l&&l.guest_email})]})}),e.jsx(r,{variant:"outline",onClick:()=>n(!1),children:e.jsx(W,{className:"h-4 w-4"})})]}),e.jsx(S,{className:"w-full",children:e.jsx(D,{className:"py-6",children:l&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{className:"font-semibold",children:"Type"}),e.jsx("p",{children:l.guest_type})]}),e.jsxs("div",{children:[e.jsx(h,{className:"font-semibold",children:"Client"}),e.jsx("p",{children:l.guest_client})]}),e.jsxs("div",{children:[e.jsx(h,{className:"font-semibold",children:"Phone"}),e.jsx("p",{children:l.guest_phone})]}),e.jsxs("div",{children:[e.jsx(h,{className:"font-semibold",children:"Designation"}),e.jsx("p",{children:l.guest_designation})]}),e.jsxs("div",{children:[e.jsx(h,{className:"font-semibold",children:"Gender"}),e.jsx("p",{children:l.guest_gender})]}),e.jsxs("div",{children:[e.jsx(h,{className:"font-semibold",children:"Address"}),e.jsx("p",{children:l.guest_address||"N/A"})]})]})})})]}),e.jsx("div",{className:"flex justify-end gap-3 w-full max-w-lg",children:e.jsxs(r,{variant:"destructive",onClick:v,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Delete Guest"]})})]})}),e.jsx(L,{open:f,onOpenChange:o,children:e.jsxs(k,{children:[e.jsxs(X,{children:[e.jsx(q,{children:"Confirm Deletion"}),e.jsx(J,{children:"Are you sure you want to delete this guest? This action cannot be undone."})]}),e.jsxs(K,{children:[e.jsx(r,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:s,children:"Delete"})]})]})})]})}function ke({sidebarOpen:i=!1,toggleSidebar:N=()=>{}}){const{guests:x,isLoading:w,error:C,refreshGuests:_}=A(),[n,f]=c.useState(""),[o,l]=c.useState(1),[d,m]=c.useState({guest_type:"All Guest Types"});c.useEffect(()=>{I({icons:B})},[]),x.filter(s=>{if(!s)return!1;const a=s.guest_fName&&s.guest_lName?`${s.guest_fName} ${s.guest_lName}`.toLowerCase():"",t=s.guest_email?s.guest_email.toLowerCase():"",T=n.toLowerCase(),F=a.includes(T)||t.includes(T),R=d.guest_type==="All Guest Types"||s.guest_type===d.guest_type;return F&&R});const u=(s,a)=>{m(t=>({...t,[s]:a}))},y=()=>{m({guest_type:"All Guest Types"}),f(""),l(1)},b=["All Guest Types",...new Set(x.filter(s=>s&&s.guest_type).map(s=>s.guest_type))],p=Object.entries(d).filter(([s,a])=>a!=="All Guest Types"),v=s=>{switch(s.toLowerCase()){case"internal":return"bg-blue-100 text-blue-800";case"external":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return w?e.jsx(e.Fragment,{children:e.jsx(ae,{})}):e.jsxs("div",{className:"flex flex-row overflow-hidden relative w-screen h-screen bg-gray-100",children:[e.jsx(E,{isOpen:i}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsx($,{onSidebarToggle:N}),e.jsxs("main",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Guest List Management"}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{type:"text",placeholder:"Search by name or account...",value:n,onChange:s=>f(s.target.value),className:"pl-10 pr-4 py-2 w-50 md:w-80"}),e.jsx("div",{className:"absolute inset-y-0 left-2 flex items-center pointer-events-none",children:e.jsx(ie,{className:"text-gray-900",size:18})})]}),e.jsxs(Z,{value:d.guest_type,onValueChange:s=>u("guest_type",s),children:[e.jsx(ee,{className:"w-[180px]",children:e.jsx(se,{placeholder:"Guest Type"})}),e.jsx(te,{children:b.map(s=>e.jsx(le,{value:s,children:s},s))})]}),(p.length>0||n)&&e.jsx(r,{variant:"ghost",onClick:y,title:"Reset all filters",children:e.jsx(ne,{className:"h-4 w-4"})})]})}),p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:p.map(([s,a])=>e.jsxs(O,{variant:"secondary",className:`px-2 py-1 ${v(a)}`,children:[s,": ",a]},s))}),e.jsx(re,{currentPage:o,setCurrentPage:l})]})]})]})}export{ke as default};
